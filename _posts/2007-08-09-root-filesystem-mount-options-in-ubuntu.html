---
layout: post
title: "우분투에서 루트 파일시스템 마운트 옵션 변경하기"
date: 2007-08-09 07:06:00.000000000 +09:00
categories:
- "카스탈리엔"
tags:
- Linux
- Ubuntu
status: publish
type: post
published: true
meta:
  _publicize_pending: '1'
  _edit_last: '3788329'
  lightboxoff: 'false'
  _wp_old_slug: '136'
  original_post_id: '136'
author:
  login: fan4326
  email: fan4326@gmail.com
  display_name: fan4326
  first_name: ''
  last_name: ''
---
<p>커널트랩에 올라온 <a href="http://kerneltrap.org/node/14148">마운트 옵션을 이용한 성능 최적화</a> 글을 보고 우분투 리눅스에도 적용시켜보기로 했다. 다른 파티션은 모두 <tt>/etc/fstab</tt> 파일에서 직접 'noatime,data=writeback' 옵션만 추가하면 되는데 루트 파일 시스템은 조금 손질이 더 갔다.</p>
<p>데비안 기반 시스템은 처음에는 루트 파일 시스템을 읽기전용(read-only)으로 마운트한 뒤 initrd 기반 초기화 과정을 수행하고, 나중에 다시 <tt>/etc/fstab</tt> 정보를 기반으로 루트파일 시스템을 다시 정상적인 쓰기 가능하도록 마운트한다.(remount) 그런데 이때 'noatime' 등과 같은 옵션은 정상적으로 동작하지만 'data=writeback' 등과 같은 옵션은 재마운트시 불가능하다는 메시지를 내면서 마운트에 실패하고 읽기전용 상태로 남아버린다.</p>
<p>이 문제의 해결 방법은 여러가지가 있겠지만, 내가 선택한 방법은 먼저 <tt>/etc/fstab</tt> 에는 'noatime' 옵션만 추가하고, <tt>/boot/grub/menu.lst</tt> 파일에서 defoptions 항목에 'rootflags=data=writeback' 을 추가하고, <tt>update-grub</tt> 명령을 실행하고 재부팅하면 적용된다.</p>
<p>성능이 좋은 PC의 경우 이 옵션이 있을 때와 없을 경우 차이점을 별로 못 느끼지만 X40 노트북에서는 어느 정도 체감 속도가 향상된 것을 느낄 수 있다. 더욱이<a href="http://tracker-project.org/"> tracker</a> 데몬 때문에 디스크가 혹사당하기 시작한 다음부터는 더욱더...</p>
